<!DOCTYPE html>
<html lang="en-US">

<head>
    <meta charset='utf-8' />
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mathemusic</title>
    <link href="./styles/lsys.css" rel="stylesheet">
    <!-- <script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.4.1/p5.min.js"></script> -->
</head>

<body>
    <header>
        <div class="center">
          <h1>Undefined Behavior</h1>
        </div>
        <div class="center">
          <h2>exploring humanity and mathematics through code</h2>
        </div>
      </header>
    <nav id="nav-bar">
        <ul class="no-bullet">
            <li><a href="./index.html">home</a></li>
            <li><a href="./about.html">about</a></li>
            <li><a href="./lsys.html">lsystems</a></li>
            <li><a href="./mathemusic.html">mathemusic</a></li>
        </ul>
    </nav>
    <main>
        <article>
            <div class="article-header">
                <h1>Mathemusic</h1>
                <h2>by Eric Chen</h2>
            </div>
            <section class="intro">
                <p>
                    When you listen to music, each note has a certain frequency which governs how "high" or "low" it
                    sounds. As you ascend the piano chromatically (which means to increase one note at a time, including
                    the black notes) you can hear the frequency rising steadily higher.
                </p>
                <div class="center">
                    <audio controls src="audio/chromatic-piano-climb.wav"></audio>
                </div>
                <p>
                    Based on what you hear you might think that the frequency of the notes is increasing linearly. If we
                    were to plot the frequency of each note on a graph you might expect to see something like this:
                </p>
                <div class="center">
                    <img src="images/piano-graph-linear.png" alt="a graph depicting a linear relationship between notes on a keyboard and frequency in hertz"/>
                </div>
                <p>
                    But that would be inaccurate. As it turns out, frequency increases <b>exponentially</b> as you climb
                    chromatically. So the true picture looks something like this:
                </p>
                <div class="center">
                    <img src="images/piano-graph-exponential.png" alt="a graph depicting an exponential relationship between notes on a keyboard and frequency in hertz"/>
                </div>
                <p>
                    In other words, moving up by one note (which is called moving up a half step) corresponds to
                    <b>multiplying by a constant frequency ratio</b>, rather than adding a constant frequency
                    difference.
                </p>
                <div class="boxed-content">
                    As an aside, frequency ratios form the basis for the theory of harmony. For example, doubling the
                    frequency of a note preserves its "pitch class," leaving it as the same note, only higher.
                    Various other ratios besides the 2:1 ratio for the octave exist which create unique sounds. These
                    are called intervals and they are stacked together to create chords.
                </div>
                <p>
                    When I realized that my initial intuition about frequency was wrong, I started to wonder what would
                    happen if the relationship between notes
                    and frequency really was linear rather than exponential. What would music sound like?
                    Furthermore, what if we tried using other functions like polynomials or logarithms? In an effort to
                    find out, I wrote some Python code that takes a
                    function as input and re-maps the frequencies of a music file according to the function.
                </p>
                <div class="center">
                    <img src="images/python-function-diagram.png" alt="a normal midi file and a function are fed as input into a Python script to output a new, transformed midi file"/>
                </div>
                <p>
                    With this tool in hand, I could dream up any function and then listen to how that choice affected a
                    familiar piece of music.
                </p>
            </section>
            <section>
                <h2>Linear Frequency Function</h2>
                <p>
                    The first thing I experimented with was a linear function. Here is what
                    chromatically ascending on a piano sounds like with a linear frequency function.
                </p>
                <div class="center">
                    <audio controls src="audio/chromatic-piano-climb-transformed-linear.wav"></audio>
                </div>
                <p>
                    Weird, right? The notes sound like they increase by large jumps at the beginning and then smaller jumps as the pitch gets higher. Why might this be?
                </p>
                <p>
                    Think back to our initial observation: our ears perceive an exponential frequency increase as a linear frequency increase. From this observation, we can infer that our ears hear in <b>log-frequency</b>. In other words, our perception of pitch is aligned with the logarithm of the frequency function, rather than the frequency function itself.
                </p>
                <p>
                    Now our frequency function is linear, so our log-frequency function (what our ear perceives) is a logarithmic function. This explains why our chromatic ascent sounds like it makes large jumps at the beginning and smaller jumps as the pitch gets higher: that is exactly how a logarithmic function increases.
                </p>
                <p>
                    Having heard the weird sounding chromatic ascent with the linear frequency function, I was eager to try it out on a complete song. Here is the regular version of the song Fur Elise, which you might recognize:
                </p>
                <div class="center">
                    <audio controls src="audio/fur-elise.wav"></audio>
                </div>
                <p>
                    And here is Fur Elise with a linear frequency function:
                </p>
                <div class="center">
                    <audio controls src="audio/fur-elise-tranformed-linear.wav"></audio>
                </div>
                <p>
                    When I heard this for the first time I literally cried with laughter because it sounded so ridiculous! It is really interesting to me how the mood of the song has totally changed from somber and beautiful to something weirdly spooky and alien and absurd.
                </p>
            </section>
            <section>
                <h2>Quadratic Frequency Function</h2>
                <p>
                    Now what if we mapped frequency to some other function besides a linear one? For example, what if we used a parabola?
                </p>
                <div class="center">
                    <img src="images/piano-graph-parabolic.png" alt="a graph depicting a quadratic relationship between notes on a keyboard and frequency in hertz"/>
                </div>
                <p>
                    Let's start with the chromatic ascent again. Here is what it sounds like with the quadratic frequency relationship:
                </p>
                <div class="center">
                    <audio controls src="audio/chromatic-piano-climb-transformed-quadratic.wav"></audio>
                </div>
                <p>
                    It doesn't really sound like an "ascent" anymore since the quadratic function is not monotonically increasing. The pitch decreases and then increases again as we climb up the piano.
                    This is what Fur Elise sounds like under this frequency mapping:
                </p>
                <div class="center">
                    <audio controls src="audio/fur-elise-transformed-quadratic.wav"></audio>
                </div>
                <p>
                    Once again the vibe of the song is totally unrecognizable! This one makes me think of some shady and suspenseful scene from a spy movie.
                </p>
            </section>
            <section>
                <h2>More Fun to be Had</h2>
                <p>
                    Obviously, there are an infinitude of other functions we could try. The functions don't even have to be continuous. (Since we only need to assign some frequency value to each of the 128 discrete MIDI note values.) There are so many possibilities to experiment with this further!
                </p>
                <p>
                    Another really cool idea would be to allow a user to draw their own line over a piano diagram, and have that line define the frequency mapping. I hope to create this as an interactive example soon. Looking even further ahead, it would be amazing if this idea could be built into a real-time instrument which changes the frequency function according to the performer's hand-motions.
                </p>
            </section>
        </article>
    </main>
</body>

</html>