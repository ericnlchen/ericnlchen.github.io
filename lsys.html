<!DOCTYPE html>
<html lang="en-US">

<head>
  <meta charset='utf-8' />
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>L-Systems</title>
  <link href="./styles/lsys.css" rel="stylesheet">
  <script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.4.1/p5.min.js"></script>
</head>

<body>
  <header>
    <div id="main-heading">
      <h1>Undefined Behavior</h1>
    </div>
    <div id="sub-heading">
      <h2>exploring humanity and mathematics through code</h2>
    </div>
  </header>
  <nav id="nav-bar">
    <ul class="no-bullet">
      <li><a href="./index.html">home</a></li>
      <li><a href="./about.html">about</a></li>
      <li><a href="./lsys.html">lsystems</a></li>
      <li><a href="./mathemusic.html">mathemusic</a></li>
    </ul>
  </nav>
  <main>
    <div id="main-title">
      <h1>L-Systems</h1>
      <h4>Updated 11/27/2022 &middot; Eric Chen</h4>
    </div>
    <article>
      <section class="intro">
        <p>
          Take a look at this drawing of a fern:
        </p>
        <div class="img-holder">
          <img id="fern-image" src="images/fern.png" alt="A line drawing that forms an organic plant-like structure"/>
        </div>
        <p>
          It looks complicated, right? Like it was drawn by an artist or traced from a real plant. If I asked you to
          come up with a procedure for generating this shape, you might not know where to start. Surprisingly, a simple
          procedure does exist. The procedure is so simple that anyone could carry it out. The only information it needs
          is this:
        </p>
        <p>
          <span class="math">axiom = <em>X</em></span>
        </p>
        <p>
          <span class="math">rule1 = <em>X &#8614; Fl[[X]rX]rF[rFX]lX</em></span>
          <span class="math">rule2 = <em>F &#8614; FF</em></span>
        </p>
        <p>
          You probably have no idea what this means right now, and that is okay. But the big idea is that all
          of the complexity of the fern shape is captured by running a simple procedure on a small set of information. The simple procedure
          is at its core just <b>textual substitution</b>.
          In this post, we will explore what that means. We will begin by studying textual substitution in the context of shapes like the fern above which is an example of a mathematical
          model called an L-system. Then, we will use what we know about L-systems to explore how all the complexity of
          mathematics itself can be generated from the same underlying mechanism of textual substitution running on a different set of information.
        </p>
      </section>
      <section class="text-content">
        <h3>Find-and-Replace</h3>
        <p>
          Have you ever used the "find-and-replace" tool in a code editor or word processor? That is how textual substitution works for L-systems. We start with the axiom and iteratively apply find-and-replace using the rules. Let's take a look at an example:
        </p>
        <p>
          <span class="math">axiom = <em>A</em></span>
        </p>
        <p>
          <span class="math">rule1 = <em>A &#8614; AB</em></span>
          <span class="math">rule2 = <em>B &#8614; A</em></span>
        </p>
        <p>
          How do we interpret the rules? Well, <em>rule1</em> simply means find all occurrences of <em>A</em> and replace them with <em>AB</em>. <em>rule2</em> means find all occurrences of <em>B</em> and replace them with <em>A</em>.
        </p>
        <p>Using this information, this is how we "grow" the L-system using find-and-replace:
        </p>
        <div class="algo">
          Start by setting the current string equal to the axiom.<span class="math">currentString = <em>A</em></span>
          Now simultaneously apply all the find-and-replace rules. In this case,
          <em>rule1</em> tells us to turn <em>A</em> into <em>AB</em>. <em>rule2</em> doesn't apply since our current string has no <em>B</em>s. So
          we just substitute <em>A</em>
          with <em>AB</em>, giving us a new string:
          <span class="math">currentString = <em>AB</em></span>
          Now, we just apply all the find-and-replace rules again! 
          In
          this case, <em>A</em> is replaced with <em>AB</em> by <em>rule1</em>
          and <em>B</em> is replaced with <em>A</em> by <em>rule2</em>. So we get:
          <span class="math">currentString = <em>ABA</em></span>
          Repeat again to get:
          <span class="math">currentString = <em>ABAAB</em></span>
          and again to get:
          <span class="math">currentString = <em>ABAABABA</em></span>
          and so on for as many iterations as you like.
        </div>
        <p>
          At this point, you might be wondering how this process of generating strings of symbols like "ABB" has
          anything
          to
          do with
          generating elegant shapes like the fern. Let's answer this question via another example.
          <span class="math">axiom = <em>F</em></span><span class="math">rule1 = <em>F &#8614; F+G</em><br>rule2 = <em>G
              &#8614; F&minus;G</em></span>
          Note that <em>F</em>, <em>G</em>, <em>+</em>, and <em>&minus;</em> are being used as symbols here, just the
          same
          as <em>A</em> and <em>B</em> from before. In particular,
          <em>+</em> and <em>&minus;</em> have no mathematical significance in this context.
          When we follow the same procedure as above using this new axiom and set of rules, we obtain the following:
        </p>
        <div class="math-container">
          <div class="math">
            Iteration 0: F<br>
            Iteration 1: F+G<br>
            Iteration 2: F+G+F&minus;G<br>
            Iteration 3: F+G+F&minus;G+F+G&minus;F&minus;G<br>
            Iteration 4: F+G+F&minus;G+F+G&minus;F&minus;G+F+G+F&minus;G&minus;F+G&minus;F&minus;G<br>
            ...<br>
            Iteration 10: F+G+F&minus;G+F+G&minus;F&minus;G+F+G+F&minus;G&minus;F+G&minus;F&minus;G+F+G+F&minus;...[~2,000 symbols]...G&minus;F&minus;G&minus;F+G+F&minus;G&minus;F+G&minus;F&minus;G
          </div>
        </div>
        <p>
          The long string of symbols that we created through this process doesn't appear particularly interesting or complex to the eye&mdash;it just looks like a
          mess.
        </p>
        <p>
          But there is a way to give this messy string a visual interpretation which reveals an interesting and complex structure.
          In
          fact, there are many ways of visualizing a string, but here is one of them: we will imagine that our string is
          a
          set
          of instructions for a robot illustrator. We will associate each symbol in the string with an instruction to
          our
          robot.
        </p>
        <p>
          For example, let's say that <em>F</em> means "draw forward." And let's say that <em>+</em> means "turn left 90
          degrees", while
          <em>&minus;</em> means "turn right 90 degrees". Now to
          transform our string into a picture, we simply give it to the robot, who reads it symbol by symbol following
          the
          instructions one at a time. (Those who are familiar with the <a
            href="https://docs.python.org/3/library/turtle.html">turtle</a> module in Python might find this method of
          drawing familiar).
          When we ask the robot illustrator to draw using the string we generated above at iteration 4, this picture emerges:
        </p>
        <div class="img-holder">
          <img src="images/dragon-iter10.png">
        </div>
        <p>
          If you don't believe me, try being the robot illustrator yourself and following the instructions on a piece of paper!
        </p>
        <p>
          Now that you hopefully understand how L-systems grow, here is an interactive example where you can enter your own axiom and a set of
          rules. The resulting image will automatically be drawn according to the visual interpretations of each symbol as shown
          in the table. Play around and see what you can create! If you need inspiration, you can click on the presets to autofill the inputs with some famous examples of L-Systems.
        </p>
      </section>

      <section class="react-interactive-example">
        <div id="react-root"></div>
        <script src="scripts/matrix.min.js"></script>
        <script src="scripts/lsys.js"></script>
      </section>
      <br>
      <section class="text-content">
        <h3>Connections with Formal Proof Systems</h3>
        <p>
          At this point you hopefully know what an L-System is. You might agree that they're cool mathematical gadgets
          and
          that they can generate complex
          structures. While all of this is true, I think there is something even more interesting to say about
          L-systems and the textual substitution scheme they use to grow.
          It turns out that performing textual substitution on strings of symbols is the only mechanism required to create a system so powerful it can prove
          all mathematical theorems. Essentially,
          we can represent our basic set of knowledge, our axioms, as some strings of symbols, and then we use
          substitution
          rules which represent logical implications to "grow" the axioms
          into new strings which we call theorems.
        </p>
        <p>
          This idea might be hard to grasp at first, so let's start by taking a step back to talk about mathematical
          proofs
          in general.
        </p>
        <h3>Formalizing Proofs</h3>
        <p>
          In the world of mathematics, we look at various mathematical objects and formulate hypotheses about their properties and behaviors. In order to know for certain 
          that a hypothesis is true,
          we need to form a logical bridge from something that we already know to be true to our hypothesis.
        </p>
        <p>
          Traditionally, when we prove theorems in math, we write informally in natural language.
        <p>
          This kind of proof is usually good enough for our purposes, since we can follow the logic and reason that it
          is
          correct using our
          understanding of natural language. But math
          is all about formalisms, and natural language is imprecise. Is it possible to formalize the process of proof,
          so
          that
          we can be absolutely sure that we followed a valid chain of logic to arrive at our conclusion? How might we do
          this?
        </p>
        <h3>Language of Logic</h3>
        <p>
          First of all, we need some language that allows us to formally talk about math and logic. Of course, we
          already have symbols
          with well-defined meanings for mathematical objects like numbers and functions. But what about the logical
          connectives we use in-between?
          We could use logical symbols like the following: &#8704; (which means "for all"), &#8707; (which means "there
          exists"), ...
        </p>
        <p>
          This allows us to express a lot of logical ideas more formally, since each of these symbols has a well-defined
          meaning. But it's still not
          clear when we can move from one formal statement using these symbols to another.
        </p>
        <h3>All Math is Set Theory</h3>
        <p>
          Another question that comes up when trying to design this mathematical proof system is: what do we use as our
          axioms? This is a powerful
          question. What is the most basic set of knowledge we need to assume about math which will allow us to prove
          everything else? We need to
          assume some knowledge that is strong enough to allow us to prove interesting results. But ideally
          we don't want our axioms to be redundant. Without a background in pure math you might imagine that we would
          start
          by assuming some
          facts about the natural numbers or the integers, mathematical objects which we learned about from a young age.
        </p>
        <p>
          However, the true starting point for all of math turns out to be Set Theory, and the axioms we typically use
          describe rules about how
          the workings of mathematical objects known as sets. A set is a very simple mathematical object. It is just an
          unordered collection of items
          with no repeats. For example, {apples, oranges, bananas}, {1,9,23}, the infinite set of natural numbers
          {1,2,3,...}, or the empty set {}.
        </p>
        <p>
          This is kind of amazing. It means that the only knowledge we need to assume to reconstruct all of math is just
          the
          behavior of sets.
          You might wonder how we can reconstruct all of math from sets. How do we talk about numbers, operations,
          functions, or literally
          anything important? It turns out that any mathematical object we can conceive can be modelled as a set.
          Specifically, some complex
          set of sets of sets of sets. And the characteristics and behaviors of the mathematical object are simulated by
          the
          simple behaviors
          of the constituent sets.
        </p>
        <p>
          For example, when we formalize math using Set Theory, the first 3 natural numbers are defined as follows:
          <span class="math">0 = {}</span>
          <span class="math">1 = {{}}</span>
          <span class="math">2 = {{},{{}}}</span>
          To add one to a number represented as a set, we take the set which includes
          everything in the previous set and the previous set itself. This same kind of simulation through sets can be done with more
          complex mathematical objects, reducing them to extremely large groups of nested sets. One interesting thing to
          note is that at the lowest level, all of the sets are empty, they contain nothing. So ultimately all mathematical
          objects can be reduced down to some extremely intricate, possibly infinite group of nested parentheses. Crazy!
        </p>
        <h3>Formal Proof System</h3>
        <p>
          Now that we have our axioms of set theory, we need some formal way of deducing new theorems from the axioms.
          The
          mind-blowing fact is that we can prove any mathematical theorem by performing mechanical substitutions on the
          axioms to arrive at the theorem.
        </p>
        <p>
          I know we seem to have strayed quite far from L-systems, so let's bring it all back together. It turns out
          that
          textual substitution is universal and powerful. The act of starting with some axiom string and manipulating it
          with some subsitution rules is not just a mechanism we see in L-systems. It is the same exact mechanism that
          is
          used in a system which can prove any mathematical theorem starting from the axioms of Set Theory.
        </p>
        <p>
          This amazing fact never fails to give me a sense of wonder. I like to imagine that the axioms of Set Theory are like
          a
          seed out of which we can grow a massive tree of mathematics with towering branches.
        </p>
      </section>
    </article>
  </main>
  <!-- Load React. -->
  <!-- Note: when deploying, replace "development.js" with "production.min.js". -->
  <script src="https://unpkg.com/react@18/umd/react.development.js" crossorigin></script>
  <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js" crossorigin></script>
  <!-- Load our React component. -->
  <script src="scripts/lsys_app.js"></script>
</body>

</html>