<!DOCTYPE html>
<html lang="en-US">

<head>
  <meta charset='utf-8' />
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>L-Systems</title>
  <link href="./styles/lsys.css" rel="stylesheet">
  <script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.4.1/p5.min.js"></script>
</head>

<body>
  <header>
    <div id="main-heading">
      <h1>Undefined Behavior</h1>
    </div>
    <div id="sub-heading">
      <h2>exploring humanity and mathematics through code</h2>
    </div>
  </header>
  <nav id="nav-bar">
    <ul class="no-bullet">
      <li><a href="./index.html">home</a></li>
      <li><a href="./about.html">about</a></li>
      <li><a href="./lsys.html">lsystems</a></li>
      <li><a href="./mathemusic.html">mathemusic</a></li>
    </ul>
  </nav>
  <main>
    <div id="main-title">
      <h1>L-Systems: Tree of Math</h1>
      <h4>by Eric Chen</h4>
    </div>
    <article>
      <section>
        <div class="center">
          <a href="#lsys-example">jump to interactive example</a>
        </div>
      </section>
      <section>
        <p>
          Take a look at this drawing of a fern:
        </p>
        <div class="img-holder">
          <img id="fern-image" src="images/fern.png" alt="A line drawing of a plant-like structure" width="447" height="409"/>
        </div>
        <p>
          It looks complicated, right? Like it was drawn by an artist or traced from a real plant. If I asked you to come up with a procedure for generating this shape, you might not know where to start.
        </p>
        <p>
          Surprisingly, this fern structure is generated by running a simple procedure on a small set of information. It won't make sense to you yet, but this is the set of information that generates the fern shape:
        </p>
        <div class="math-container">
          <ul class="no-bullet">
            <li><b>axiom</b>: <em>X</em></li>
            <li><b>rule1</b>: <em>X &rarr; Fl[[X]rX]rF[rFX]lX</em></li>
            <li><b>rule2</b>: <em>F &rarr; FF</em></li>
          </ul>
        </div>
        <p>
          This shape and the rules that generate it are an example of a mathematical structure called an L-system, or Lindenmayer system, named after the Hungarian biologist who developed them to simulate plant growth. In this post, we will begin by uncovering the inner workings and beauty of L-systems. Then we will dive deeper into the world of pure mathematics, exploring the idea of choosing a set of information to generate a "picture" of a mathematical theory. Don't worry if this doesn't make sense yet, we'll take it one step at a time. Let's dive right in!
        </p>
      </section>
      <section>
        <h3>L-Systems</h3>
        <p>
          Have you ever used the find-and-replace tool in a code editor or word processor? Because find-and-replace is exactly the procedure that makes L-systems grow. We start with some initial symbol (which we call the <b>axiom</b>) and repeatedly find certain patterns and replace them with other patterns, according to our given <b>rules</b>. As we do this, we generate an increasingly long and complex string of symbols. Let's take a look at an example to make this clearer.
        </p>
        <div class="math-container">
          <ul class="no-bullet">
            <li><b>axiom</b>: <em>A</em></li>
            <li><b>rule1</b>: <em>A &rarr; AB</em></li>
            <li><b>rule2</b>: <em>B &rarr; A</em></li>
          </ul>
        </div>
        <p>
          <b class="darkgreen">rule1</b> means find all occurrences of <em class="darkgreen">A</em> and replace them with <em class="darkgreen">AB</em>.
        </p>
        <p>
          <b class="darkgreen">rule2</b> means find all occurrences of <em class="darkgreen">B</em> and replace them with <em class="darkgreen">A</em>.
        </p>
        <p>
          Using this set of information which specifies an L-system, this is how we use find-and-replace to grow it:
        </p>
        <div class="algo">
          <p>
            Start by setting the current string equal to the axiom.
          </p>
          <div class="math-container">
            <p><b>currentString</b> = <em>A</em></p>
          </div>
          <p>
            Now simultaneously apply all the find-and-replace rules. In this case, <b class="darkgreen">rule1</b> tells us to turn <em class="darkgreen">A</em> into <em class="darkgreen">AB</em>. <b class="darkgreen">rule2</b> doesn't apply since our current string has no <em class="darkgreen">B</em>s. So we just substitute <em class="darkgreen">A</em> with <em class="darkgreen">AB</em>, giving us a new string:
          </p>
          <div class="math-container">
            <p><b>currentString</b> = <em>AB</em></p>
          </div>
          <p>
            Now, we just apply all the find-and-replace rules again! In this case, <em class="darkgreen">A</em> is replaced with <em class="darkgreen">AB</em> by <b class="darkgreen">rule1</b> and <em class="darkgreen">B</em> is replaced with <em class="darkgreen">A</em> by <b class="darkgreen">rule2</b>. So we get:
          </p>
          <div class="math-container">
            <p><b>currentString</b> = <em>ABA</em></p>
          </div>
          <p>
            Repeat again to get:
          </p>
          <div class="math-container">
            <p><b>currentString</b> = <em>ABAAB</em></p>
          </div>
          <p>
            and again to get:
          </p>
          <div class="math-container">
            <p><b>currentString</b> = <em>ABAABABA</em></p>
          </div>
          <p>
            and so on for as many iterations as you like.
          </p>
        </div>
        <p>
          At this point, you might be wondering how this process of generating strings of symbols like <em class="darkgreen">ABAABABA</em> has anything to do with generating elegant shapes like the fern. Let's take a look at another example to answer this question.
        </p>
        <div class="math-container">
          <ul class="no-bullet">
            <li><b>axiom</b>: <em>F</em>
            <li><b>rule1</b>: <em>F &rarr; F+G</em></li>
            <li><b>rule2</b>: <em>G &rarr; F&minus;G</em></li>
          </ul>
        </div>
        <p>
          Note that <em class="darkgreen">F</em>, <em class="darkgreen">G</em>, <em class="darkgreen">+</em>, and <em class="darkgreen">&minus;</em> are being used as symbols here, just the same as <em class="darkgreen">A</em> and <em class="darkgreen">B</em> from before. In particular, <em class="darkgreen">+</em> and <em class="darkgreen">&minus;</em> have no mathematical significance in this context. When we grow a string using the find-and-replace procedure on this new axiom and rules, we obtain the following:
        </p>
        <div class="math-container">
          <ul class="no-bullet">
            <li><b>Iteration 0</b>: <em>F</em></li>
            <li><b>Iteration 1</b>: <em>F+G</em></li>
            <li><b>Iteration 2</b>: <em>F+G+F&minus;G</em></li>
            <li><b>Iteration 3</b>: <em>F+G+F&minus;G+F+G&minus;F&minus;G</em></li>
            <li><b>Iteration 4</b>: <em>F+G+F&minus;G+F+G&minus;F&minus;G+F+G+F&minus;G&minus;F+G&minus;F&minus;G</em></li>
            <li>...</li>
            <li><b>Iteration 10</b>: <em>F+G+F&minus;G+F+G&minus;F&minus;G+F+G+F&minus;G&minus;F+G&minus;F&minus;G+F+G+F&minus;</em>...<b>[~2,000 symbols]</b>...<em>G&minus;F+G+F&minus;G&minus;F+G&minus;F&minus;G</em></li>
          </ul>
        </div>
        <p>
          The long string of symbols that we created through this process doesn't appear particularly interesting or to the eye&mdash;it just looks like a mess. But there is a way to give this messy string a visual interpretation which reveals its complex structure.
        </p>
        <p>
          Let's imagine that our string is a set of instructions for a robot illustrator. We will associate each symbol in the string with an instruction to our robot. For example, let's say that <em class="darkgreen">F</em> and <em class="darkgreen">G</em> both mean <span class="bubble">draw forward</span>. And let's say that <em class="darkgreen">+</em> means <span class="bubble">turn left 90&deg;</span>, while <em class="darkgreen">&minus;</em> means <span class="bubble">turn right 90&deg;</span>. Now to transform our string into a picture, we give it to the robot who reads it symbol by symbol, following the instructions one at a time. When we ask the robot illustrator to draw using the string we generated above at iteration 10, this picture emerges:
        </p>
        <div class="img-holder">
          <img src="images/dragon-iter10.png" alt="the dragon fractal: an intricate rectilinear pattern of lines" width="696" height="472"/>
        </div>
        <p>
          If you don't believe me, try being the robot illustrator yourself and follow the instructions on a piece of paper!
        </p>
        <p>
          Phew! That was a lot of information so let's summarize. An L-system has an initial symbol called an axiom and a set of find-and-replace rules. We start from the axiom and follow the rules to find and replace symbols over multiple iterations, generating a long and messy string of symbols. Finally, we give each symbol a visual interpretation (like <span class="bubble">draw forward</span>, <span class="bubble">turn right 90&deg;</span>, etc.) to transform the string into a picture that reveals the complexity and beauty hidden within the mess. And remember the fern shape from the beginning? That fern is the L-system generated by the following axiom and rules...
        </p>
        <div class="math-container">
          <ul class="no-bullet">
            <li><b>axiom</b>: <em>X</em></li>
            <li><b>rule1</b>: <em>X &rarr; Fl[[X]rX]rF[rFX]lX</em></li>
            <li><b>rule2</b>: <em>F &rarr; FF</em></li>
          </ul>
        </div>
        <p>
          ...where <em class="darkgreen">F</em> means <span class="bubble">draw forward</span>, <em class="darkgreen">r</em> means <span class="bubble">turn right 25&deg;</span>, and <em class="darkgreen">l</em> means <span class="bubble">turn left 25&deg;</span>. What about the bracket symbols, <em class="darkgreen">]</em> and <em class="darkgreen">[</em>? The opening bracket <em class="darkgreen">[</em> means "store the current position and direction for later", and the closing bracket <em class="darkgreen">]</em> means "restore the most recent position and direction that was stored". For those familiar with stack data structures, we might call these operations <span class="bubble">push</span> and <span class="bubble">pop</span>. What about the symbol <em class="darkgreen">X</em>? <em class="darkgreen">X</em> has no visual interpretation, but it's still an important symbol for the growth of the L-system, since it appears in <b class="darkgreen">rule1</b>. This is how the fern is generated. I think it's amazing that the beautiful, organic fern structure can be captured by the mechanical process of find-and-replace on textual symbols.
        </p>
        <p>
          Now that you hopefully understand how L-systems grow, you might ask yourself: what other patterns emerge when I choose a different axiom and rules? I created an interactive example so you can find out for yourself! Enter your own axiom and rules and the resulting image will automatically be drawn. There are 10 symbols with visual interpretations that are provided in the table below. Play around and see what you can create! If you want some inspiration, you can click on the presets to autofill the inputs with some famous examples of L-Systems.
        </p>
      </section>
      <section id="lsys-example">
        <div id="react-root"></div>
      </section>
      <section>
        <h3>A Bigger Picture</h3>
        <p>
          At this point, you might agree that L-systems are fun mathematical toys, and that they can generate beautiful and complex structures. While this is true, there are deeper and more interesting things left to uncover! Going forward, we will use L-systems as an analogy to explore an area of math which deals with near-philosophical ideas like truth, proof, and meaning.
        </p>
        <p>
          As we start down this new path, let's look at L-systems from a different perspective. Previously, we started from an axiom and rules and used this to generate an image. Now, let's reverse the process. Imagine that I show you a picture of an L-system and ask you to figure out the axiom and rules that generated it. You can imagine that the L-system is a miniature world. You observe the visual features of the L-system, which gives you some intuition about how it behaves. The task of finding an axiom and rules that generate the L-system is like finding a set of laws that govern its world, generating the picture you observe.
        </p>
        <p>
          You can compare this to the process of discovering the laws of physics. Early physicists observed our world and noticed certain behaviors, like the tendendency of objects to accelerate down to Earth. They formulated the laws of gravity to explain this observation. The common idea here is the process of finding a core set of information to capture observed behaviors.
        </p>
        <p>
          So how does this connect to the realm of pure mathematics? In math, we often begin with intuition. For example, we know how to add and subtract numbers because we understand the concept of giving and receiving objects or money. Our intuition about addition and subtraction is like a "picture of arithmetic" that we have in our heads. While intuition is great, mathematics is all about precision and rigor (more on this later). So we want to find a core set of of truths (the <b>axioms</b>) and some <b>rules</b> of inference which can be used to deduce the facts about arithmetic that we intuitively have in our heads.
        </p>
        <p>
          In the case of arithmetic, the following set of axioms turns out to be sufficient to prove every familiar fact about the natural numbers:
        </p>
        <div class="math-container">
          <ol class="bold-numbers italic">
            <li>0 is a natural number.</li>
            <li>Every natural number has another natural number coming right after it. (We will call this number it's successor.)</li>
            <li>If two natural numbers have the same successor, then they are equal.</li>
            <li>0 is not the successor of any natural number.</li>
            <li>If we start with 0 and keep taking successors, we will end up hitting every natural number.</li>
          </ol>
        </div>
        <p>
          These are called the Peano axioms. Assuming only these 5 axioms to be true, we can use logical rules of inference to prove all theorems about the natural numbers. We can reconstruct a picture of arithmetic.
        </p>
        <p>
          Let's consider an intuitive fact about the natural numbers, <em class="darkgreen">1 &ne; 2</em> and let's verify that we can prove this fact from our axioms. In other words, let's pretend that we know nothing about math besides the 5 Peano axioms above, and build a logical argument to show that <em class="darkgreen">1 &ne; 2</em>. Here is a proof:
        </p>
        <div class="math-container italic">
          <div>
            <p>
              We know that 1 is the successor of 0, and 2 is the successor of 1.
            </p>
            <p>
              If 1 = 2, then the successor of 0 equals the successor of 1. In other words, 0 and 1 have the same successor.
            </p>
            <p>
              Then by axiom 3, it has to be true that 0 = 1.
            </p>
            <p>
              But 0 cannot equal 1 because 1 is the successor of 0 and by axiom 4 we know that 0 is not the successor of any natural number.
            </p>
            <p>
              Therefore it is logically impossible that 1 = 2, so 1 &ne; 2.
            </p>
          </div>
        </div>
        <p>
          This may seem like a silly example, but we can prove much more interesting facts too. It might take a long time to fully write and explain the proofs, but it's certainly possible!
        </p>
      </section>
      <section>
        <h3>Why Proofs?</h3>
        <p>
          So why do we even need proofs in the first place? Isn't it kind of tedious to go through multiple logical steps to prove something super obvious like <em class="darkgreen">1 &ne; 2</em>?
        </p>
        <p>
          Well, yes it is tedious, but it's also worthwhile. At first, it's important to develop an intuitive understanding of mathematical concepts in relation to the real world. But as you begin to consider more complex concepts, intuition can fail us. This is where a proof built from the axioms provides confidence that a non-obvious statement is true. Some of the most beautiful and interesting theorems in math are highly non-intuitive, but we know they are true because they arise as a logical consequence of simple assumptions via proof.
        </p>
        <p>
          Proofs are especially important in research, at the frontier of math. In research, mathematicians think about various mathematical objects and ask questions about their properties and behaviors. They don't know the answers! Sometimes, they have a guess, a hypothesis. The only way to confirm or reject their hypothesis, thereby advancing our knowledge of math, is to write a proof.
        </p>
      </section>
      <section>
        <h3>The Biggest Picture</h3>
        <p>
          From arithmetic, to calculus, to linear algebra, mathematicians have come up with axioms for many different theories. But what if we consider an even bigger picture&mdash;the picture of all of mathematics? Is there a fundamental set of axioms which captures the behavior of all mathematical structures and objects? Is there a set of axioms from which every mathematical theorem can be derived? Suprisingly, amazingly, awesomely, the answer is yes!
        </p>
        <p>
          The axioms of <b>set theory</b> (specifically, the ZFC axioms) are enough to generate the entire mathematical universe. Think of any mathematical object. Its behaviors are encapsulated by these axioms. Imagine any mathematical theorem. You can prove that theorem from these axioms. Woah.
        </p>
        <p>
          So what are these fundamental truths so powerful that all mathematics can be derived from them? They are surprisingly simple. To go in depth into each axiom would require some additional background information about set theory and logic. But at their core, the axioms of ZFC are 9 statements that describe the properties of mathematical objects known as <b>sets</b>. A set is simply an unordered collection of items, with no repeats. Sets are commonly written with curly braces. For example, the following are sets:
        </p>
        <div class="math-container">
          <ul class="no-bullet center-items">
            <li>{1, 2, 3}</li>
            <li>{"dragon", "fractal"}</li>
            <li>{ } (which is called the empty set)</li>
            <li>{1, { }, {1, 2}}</li>
          </ul>
        </div>
        <p>
          Note from the last example that sets can contain other sets as their elements. Sets can also be infinite, for example the collection of natural numbers <em class="darkgreen">{0, 1, 2, 3, 4, ...}</em> is a set.
        </p>
        <p>
          But what's really mind blowing is that in the world of set theory, we ONLY assume basic information about the behavior of sets. We begin without even having the concept of numbers. So at first, we can't even talk about the set <em class="darkgreen">{1, 2, 3}</em> because the axioms don't define what <em class="darkgreen">1</em>, <em class="darkgreen">2</em>, and <em class="darkgreen">3</em> mean.
        </p>
        <p>
          How do we derive theorems about numbers, operations, functions, or literally anything besides sets? It turns out that any mathematical object we can conceive can be modelled as a set. Specifically, some complex set of sets of sets of sets. At the innermost level of these nested sets, every set is empty. The behaviors of all mathematical objects are then simulated by the simple properties of the constituent sets that they are composed of.
        </p>
        <p>
          For example, the natural number zero is defined as:
        </p>
        <div class="math-container">
          <p><em>0 = { }</em></p>
        </div>
        <p>
          And the successor of a natural number is defined as the set which includes everything in the previous set, plus the previous set itself. So we get:
        </p>
        <div class="math-container">
          <ul class="no-bullet">
            <li><em>1 = {{ }}</em></li>
            <li><em>2 = {{ }, {{ }}}</em></li>
            <li><em>3 = {{ }, {{ }}, {{ }, {{ }}}}</em></li>
            <li>...</li>
          </ul>
        </div>
        <p>
          Once we define the natural numbers in this way, we can prove from the axioms of set theory that these natural numbers satisfy the 5 Peano axioms, so they can be used to prove any familiar fact about the natural numbers. We have generated the picture of arithmetic. In much the same way, we can reconstruct ANY mathematical object (functions, real numbers, complex numbers, and anything else you can imagine) out of sets such that the properties of the constituent sets work together to simulate the behavior of the object as a whole. This is how the axioms of set theory generate the picture of all mathematics.
        </p>
      </section>
      <section>
        <h3>An Incomplete Picture</h3>
        <p>
          We've come a long way from where we started. At first we considered L-systems, which generated pictures from an axiom and rules. Then, we turned to the world of pure mathematics and explored how different fundamental truths (axioms) could be combined with logical deduction systems (rules) to generate "pictures" of mathematical theories like the theory of arithmetic. Finally, we learned that some sets of axioms (like the axioms of set theory) are powerful enough to generate the picture of ALL mathematics.
        </p>
        <p>
          As we come to the end of our journey, lets think a little bit more deeply about the idea of a "picture of all mathematics." What does it mean to be able to generate such a picture?
        </p>
        <p>
          Intuitively, it should mean that if a mathematical statement is true, then we can prove that statement from our axioms. Furthermore, the reverse should be true: if we can prove a statement from our axioms, then that statement should be true. The first property is often called <b>completeness</b> while the second is called <b>consistency</b>.
        </p>
        <p>
          At this point, I have to admit that I lied a little bit, because it turns out that under this definition the axioms of set theory cannot generate the picture of all mathematics. Specifically, assuming that set theory is consistent, there are some true mathematical statements that can never be proven from its axioms. So why not just add new axioms, or choose a better set of axioms that generates the complete picture?
        </p>
        <p>
          It turns out that this is impossible, as proven by mathematician Kurt G&#246;del in his famous Inconsistency Theorem. No matter what axioms we choose, there will always be parts of the picture of mathematics that remain in shadow. I find this fact to be simultaneously unsettling and incredible. It feels uncomfortable that there exist mathematical questions that we can never answer. But that is also exactly what fills me with wonder and reverence for mathematics and the beauty of the great unknown.
        </p>
    </article>
  </main>
  <!-- Load matrix code. -->
  <script src="scripts/matrix.min.js"></script>
  <!-- Load React. -->
  <!-- Note: when deploying, replace "development.js" with "production.min.js". -->
  <script src="https://unpkg.com/react@18/umd/react.production.min.js" crossorigin></script>
  <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js" crossorigin></script>
  <!-- Load our React component. -->
  <script src="scripts/lsys_app.js"></script>
</body>
</html>