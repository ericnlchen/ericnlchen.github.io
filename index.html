<!DOCTYPE html>

<head>
  <meta charset='utf-8' />
  <script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.4.1/p5.min.js"></script>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>L-Systems</title>
  <link href="./stylesheets/index.css" rel="stylesheet">
</head>

<body>
  <h1>L-Systems</h1>
  <p>
    An <b>L-System</b> is a mathematical object which uses simple rules to generate complex organic shapes, like this fern:
  </p>
  <img src="fern.png" alt="an L-System that looks like a fern">
  <p>
    In this article, we will describe the inner-workings of L-Systems and explore the elegant patterns they give rise to. Then we will
    dive deeper into the theoretical importance of systems that bear close resemblance to L-Systems.
  </p>
  <p>
    An L-System consist of two main components: the <b>axiom</b> and the <b>rules</b>. The axiom describes
    the initial state of the system. You can think of it like a seed; it describes what the plant looks like
    before it begins to develop. The axiom will always be a single symbol. For example, <span class="math">Axiom = <em>A</em></span>
  </p>
  <p>
    The rules, on the other hand, describe how the system grows and changes over time.
    Building on the plant analogy, you can think of the rules as the plant's DNA.
    Each rule will tell us how to substitute one symbol for another string of one or more symobls. Here is an example of a rule:
    <span class="math">Rule = <em>A &#8614; AB</em></span>
    This rule means that whenever we see they symbol <em>A</em>, we need to substitute it with the string <em>AB</em>.
  </p>
  <p>To "grow" the L-System,
    we start by applying the rules to the axiom. This means we look at the axiom and wherever we see a symbol which occurs
    on the left side of a rule, we replace it with the string on the right side of that rule. In our example we have an <em>A</em> in
    our axiom and our rule has an <em>A</em> on the left side, so we replace
    <em>A</em> with <em>AB</em>. Then all we do is repeat. We take our newly formed string <em>AB</em> and apply the
    rules again. Once again we substitute <em>A</em> with <em>AB</em> and leave the <em>B</em> alone (since we have no rule telling us to do something
    with <em>B</em>) leaving us with the string <em>ABB</em>. We can repeat this process for as many iterations as we want. In this case
    our L-System yields the strings <em>ABBB...</em> with the number of <em>B</em>'s equal to the number of iterations.
  </p>
  <p>
    Let's look at another example. INSERT DRAGON EXAMPLE HERE
  </p>
  <p>
    At this point, you might be wondering how this process of generating strings of symbols like "ABB" has anything to do with
    generating elegant shapes like the fern.
  </p>
  <p>
    The string that we generated in the example
    above doesn't appear particularly interesting or complex to the eye as it is -- it just looks like a mess.
  </p>
  <p>
    Luckily, there is a way to give this messy string a visual interpretation which reveals its complex structure. In
    fact, there are many ways of visualizing a string but here is one of them: we will imagine that our string is a set
    of instructions for a robot illustrator. We will associate each symbol in the string with an instruction to our
    robot.
    For example, let's say that <em>F</em> means "draw forward." And let's say that <em>+</em> means turn left 90 degrees. Now to
    transform our string into a picture, we simply give it to the robot, who reads it symbol by symbol, following the
    instructions one at a time. (Those who are familiar with the turtle module in Python might find this method of
    drawing familiar).
    When we do this with the string we generated above, this beautiful picture emerges:
  </p>
  <p>
    Here is an interactive example (if you're curious how I created it, click here) where you can create your own
    L-System by
    inputting an axiom and a set of rules. The resulting image will automatically be drawn according to the visual
    interpretations of each
    symbol as shown in the table. You can click on the presets to autofill the inputs with some famous examples of
    L-Systems.
  </p>

  <div id="interactive-example">
    <div id="user-inputs">

      <div id="axiom-input">
        <h2>Axiom:</h2>
        <input type="text" maxlength="1" class="short" id="axiom" name="axiom"><br>
      </div>
      <br>
      <div id="rules-input">
        <h2>Rules:</h2>
        <ul id="rules-list" class="no-bullet">
          <li id="first-rule">
            <input type="text" maxlength="1" class="short" name="rule-input">
            &#8614;
            <input type="text" class="medium" name="rule-output">
          </li>
        </ul>
        <div class="button-holder">
          <button id="plus-rule" class="round plus">+</button>
        </div>
      </div>
      <br>
      <div id="iterations-input">
        <h2>Iterations:</h2>
        <ul class="no-bullet">
          <li>
            <input type="number" class="number" id="iters-input" name="iters-input" min="0" value="3" />
            <div id="iter-warning"></div>
          </li>
        </ul>
      </div>
      <br>
      <h2>Alphabet:</h2>
      <table>
        <tr>
          <th>Symbol</th>
          <th>Visual Meaning</th>
        </tr>
        <tr>
          <td>F</td>
          <td>draw forward</td>
        </tr>
        <tr>
          <td>G</td>
          <td>draw forward</td>
        </tr>
        <tr>
          <td>f</td>
          <td>move forward</td>
        </tr>
        <tr>
          <td>g</td>
          <td>move forward</td>
        </tr>
        <tr>
          <td>L</td>
          <td>turn left 90&#176;</td>
        </tr>
        <tr>
          <td>R</td>
          <td>turn right 90&#176;</td>
        </tr>
        <tr>
          <td>l</td>
          <td>turn left 25&#176;</td>
        </tr>
        <tr>
          <td>r</td>
          <td>turn right 25&#176;</td>
        </tr>
        <tr>
          <td>[</td>
          <td>save position (push)</td>
        </tr>
        <tr>
          <td>]</td>
          <td>restore position (pop)</td>
        </tr>
      </table>
      <div id="presets">
        <h2>Presets:</h2>
        <select name="presets" id="preset-select">
          <option value=""></option>
          <option value="dragon">Dragon Curve</option>
          <option value="fern">Fern</option>
          <option value="koch">Koch Curve</option>
        </select>
      </div>
    </div>
    <div id="sketch-holder">
      <!-- Our p5 sketch will go here. -->
    </div>
    <script src="matrix.min.js"></script>
    <script src="index.js"></script>
  </div>
</body>